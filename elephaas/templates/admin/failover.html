{% extends "admin/base_site.html" %}
{% load i18n l10n admin_urls %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
&rsaquo; <a href="{% url opts|admin_urlname:'changelist' %}">{{ opts.verbose_name_plural|capfirst }}</a>
&rsaquo; {% trans 'Perform Failover for Multiple DR Pairs' %}
</div>
{% endblock %}

{% block content %}
    <h1>Warning!</h1>

    <p>After activating the secondary node, the primary node will be <b>stopped</b> if it wasn't already offline. This will prevent any data from mistakenly being applied to the old primary node. In order to rectify this situation, a subsequent rebuild will be required as a separate step. This separation prevents lengthening the failover process, as rebuilding a slave can be very time-consuming.</p>

    <p>The following DR pairs will now switch to the secondary node:</p>

    <form action="" method="post">{% csrf_token %}
    <table width='50%'>
        <thead>
        <tr>
            <th>Name</th>
            <th>New Primary</th>
            <th>Virtual Host</th>
        </tr>
        </thead>
        {% for obj in queryset %}
        <tr>
            <td>
                <input type="hidden" name="_selected_action" value="{{ obj.pk|unlocalize }}" />
                {{ obj.label }}
            </td>
            <td>{{ obj.secondary }}</td>
            <td>{{ obj.vhost }}</td>
        </tr>
        {% endfor %}
    </table>
    <br />
    <div>
    <input type="hidden" name="action" value="failover_pair" />
    <input type="hidden" name="post" value="yes" />
    <input type="submit" value="{% trans "Yes, I'm Sure!" %}" />
    </div>
    </form>
{% endblock %}
